<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DISCORD SENDER 24/7</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary-color: #5865F2;
      --primary-dark: #4752C4;
      --danger-color: #ED4245;
      --success-color: #3BA55C;
      --warning-color: #FAA81A;
      --bg-color: #121212;
      --card-bg: #1E1E1E;
      --text-color: #FFFFFF;
      --text-secondary: #B3B3B3;
      --input-bg: #2D2D2D;
      --border-color: #444;
      --neon-glow: 0 0 10px rgba(88, 101, 242, 0.8);
    }

    body {
      font-family: 'Roboto', sans-serif;
      background: var(--bg-color);
      color: var(--text-color);
      margin: 0;
      padding: 20px;
      background-image: 
        radial-gradient(circle at 25% 25%, rgba(88, 101, 242, 0.15) 0%, transparent 50%),
        radial-gradient(circle at 75% 75%, rgba(237, 66, 69, 0.15) 0%, transparent 50%);
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      background: var(--card-bg);
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      border: 1px solid var(--border-color);
      position: relative;
      overflow: hidden;
    }

    .container::before {
      content: "";
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: linear-gradient(
        to bottom right,
        transparent 45%,
        rgba(255, 255, 255, 0.03) 50%,
        transparent 55%
      );
      animation: shine 6s infinite linear;
      z-index: 0;
    }

    @keyframes shine {
      0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
      100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
    }

    h1 {
      font-family: 'Orbitron', sans-serif;
      color: var(--primary-color);
      text-align: center;
      font-size: 2.5rem;
      margin-bottom: 10px;
      text-shadow: 0 0 10px rgba(88, 101, 242, 0.5);
      letter-spacing: 2px;
      position: relative;
    }

    .subtitle {
      font-family: 'Orbitron', sans-serif;
      text-align: center;
      color: var(--text-secondary);
      margin-bottom: 30px;
      font-size: 1rem;
      letter-spacing: 1px;
    }

    .form-group {
      margin-bottom: 25px;
      position: relative;
      z-index: 1;
    }

    label {
      display: block;
      margin-bottom: 10px;
      color: var(--text-secondary);
      font-weight: 700;
      font-size: 0.9rem;
      letter-spacing: 1px;
    }

    input, textarea {
      width: 100%;
      padding: 15px;
      background: var(--input-bg);
      border: 1px solid var(--border-color);
      color: var(--text-color);
      border-radius: 8px;
      font-size: 16px;
      transition: all 0.3s;
      box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.2);
      font-family: 'Roboto', sans-serif;
    }

    input:focus, textarea:focus {
      outline: none;
      border-color: var(--primary-color);
      box-shadow: 0 0 0 2px rgba(88, 101, 242, 0.3), inset 0 2px 5px rgba(0, 0, 0, 0.2);
    }

    textarea {
      min-height: 120px;
      resize: vertical;
    }

    .button-group {
      display: flex;
      gap: 15px;
      margin-bottom: 20px;
    }

    button {
      background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
      color: white;
      border: none;
      padding: 15px 25px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
      transition: all 0.3s;
      flex: 1;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-family: 'Orbitron', sans-serif;
      box-shadow: 0 4px 15px rgba(88, 101, 242, 0.4);
      position: relative;
      overflow: hidden;
    }

    button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(88, 101, 242, 0.6);
    }

    button:disabled {
      background: #555;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
      opacity: 0.7;
    }

    .btn-stop {
      background: linear-gradient(135deg, var(--danger-color), #C0392B);
      box-shadow: 0 4px 15px rgba(237, 66, 69, 0.4);
    }

    .btn-stop:hover {
      box-shadow: 0 6px 20px rgba(237, 66, 69, 0.6);
    }

    #status {
      padding: 15px;
      border-radius: 8px;
      background: var(--input-bg);
      margin: 20px 0;
      border-left: 4px solid var(--danger-color);
      font-weight: bold;
    }

    #status.active {
      border-left-color: var(--success-color);
    }

    .status-text {
      font-family: 'Orbitron', sans-serif;
      letter-spacing: 1px;
    }

    .active {
      color: var(--success-color);
    }

    .inactive {
      color: var(--danger-color);
    }

    #logs {
      max-height: 300px;
      overflow-y: auto;
      background: var(--input-bg);
      padding: 15px;
      border-radius: 8px;
      margin-top: 20px;
      box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.2);
    }

    .log-entry {
      margin-bottom: 10px;
      padding: 10px;
      border-bottom: 1px solid var(--border-color);
      font-family: 'Roboto Mono', monospace;
      font-size: 14px;
    }

    .log-time {
      color: var(--text-secondary);
      font-size: 0.8em;
      margin-bottom: 5px;
    }

    .log-message {
      margin-bottom: 5px;
    }

    .log-details {
      background: rgba(0,0,0,0.3);
      padding: 8px;
      border-radius: 5px;
      margin-top: 5px;
      font-size: 0.9em;
      white-space: pre-wrap;
      word-break: break-all;
    }

    .success-log {
      color: var(--success-color);
    }

    .error-log {
      color: var(--danger-color);
    }

    .warning {
      background: rgba(250, 168, 26, 0.1);
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      border-left: 4px solid var(--warning-color);
      color: var(--warning-color);
    }

    .warning strong {
      color: var(--warning-color);
    }

    @media (max-width: 768px) {
      .container {
        padding: 20px;
      }
      
      h1 {
        font-size: 1.8rem;
      }
      
      .button-group {
        flex-direction: column;
      }
    }

    /* تأثيرات النيون */
    .neon-text {
      animation: neon-glow 1.5s ease-in-out infinite alternate;
    }

    @keyframes neon-glow {
      from {
        text-shadow: 0 0 5px var(--primary-color), 0 0 10px var(--primary-color);
      }
      to {
        text-shadow: 0 0 10px var(--primary-color), 0 0 20px var(--primary-color);
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 class="neon-text">DISCORD SENDER 24/7</h1>
    <p class="subtitle">I'M READY TO SEND MESSAGES 24 HOURS!</p>
    
    <div class="warning">
      <strong>WARNING:</strong> استخدام توكن الحساب الشخصي قد يؤدي إلى حظر حسابك من Discord. استخدم هذه الأداة بحذر ومسؤولية.
    </div>
    
    <div class="form-group">
      <label for="channelId">Channel ID:</label>
      <input type="text" id="channelId" placeholder="123456789">
    </div>
    
    <div class="form-group">
      <label for="token">Discord Token:</label>
      <input type="password" id="token" placeholder="أدخل توكن حسابك الشخصي">
    </div>
    
    <div class="form-group">
      <label for="message">Message Content:</label>
      <textarea id="message" placeholder="أدخل الرسالة هنا"></textarea>
    </div>
    
    <div class="form-group">
      <label for="delay">Delay Between Messages (seconds):</label>
      <input type="number" id="delay" value="5" min="1" max="60">
    </div>
    
    <div class="button-group">
      <button id="startBtn">START SENDING</button>
      <button id="stopBtn" class="btn-stop" disabled>STOP SENDING</button>
    </div>
    
    <div id="status">
      Status: <span class="status-text inactive">INACTIVE</span>
    </div>
    
    <div id="logs"></div>
  </div>

  <script>
    // إنشاء Web Worker
    const workerCode = `
      let isSending = false;
      let abortController = null;
      let delay = 5000;
      
      self.onmessage = async function(e) {
        const { type, data } = e.data;
        
        if (type === 'START') {
          isSending = true;
          const { channelId, token, message, delay: newDelay } = data;
          delay = newDelay * 1000;
          
          while (isSending) {
            abortController = new AbortController();
            
            try {
              const response = await fetch(\`https://discord.com/api/v9/channels/\${channelId}/messages\`, {
                method: 'POST',
                headers: {
                  'Authorization': token,
                  'Content-Type': 'application/json'
                },
                body: JSON.stringify({ content: message }),
                signal: abortController.signal
              });
              
              const result = await response.json();
              self.postMessage({
                type: 'LOG',
                data: {
                  status: 'success',
                  message: 'Message sent successfully',
                  response: result,
                  timestamp: new Date().toLocaleTimeString()
                }
              });
            } catch (error) {
              self.postMessage({
                type: 'LOG',
                data: {
                  status: 'error',
                  message: 'Error sending message',
                  error: error.message,
                  timestamp: new Date().toLocaleTimeString()
                }
              });
              
              if (error.name === 'AbortError') {
                self.postMessage({
                  type: 'STOPPED'
                });
                break;
              }
            }
            
            if (isSending) {
              await new Promise(resolve => setTimeout(resolve, delay));
            }
          }
        }
        
        if (type === 'STOP') {
          isSending = false;
          if (abortController) {
            abortController.abort();
          }
        }
      };
    `;

    // إنشاء blob من كود الworker
    const blob = new Blob([workerCode], { type: 'application/javascript' });
    const workerUrl = URL.createObjectURL(blob);
    const worker = new Worker(workerUrl);

    // عناصر DOM
    const startBtn = document.getElementById('startBtn');
    const stopBtn = document.getElementById('stopBtn');
    const statusText = document.querySelector('#status .status-text');
    const logsDiv = document.getElementById('logs');

    // حالة التطبيق
    let isSending = false;

    // IndexedDB
    let db;
    const openDB = () => {
      return new Promise((resolve, reject) => {
        const request = indexedDB.open('DiscordSenderDB', 1);

        request.onupgradeneeded = (event) => {
          const db = event.target.result;
          if (!db.objectStoreNames.contains('sessions')) {
            db.createObjectStore('sessions', { keyPath: 'id' });
          }
        };

        request.onsuccess = (event) => {
          db = event.target.result;
          resolve(db);
        };

        request.onerror = (event) => {
          reject(event.target.error);
        };
      });
    };

    const saveSession = async (data) => {
      if (!db) await openDB();
      return new Promise((resolve, reject) => {
        const tx = db.transaction('sessions', 'readwrite');
        const store = tx.objectStore('sessions');
        store.put({ id: 'current', ...data, lastUpdated: new Date() });
        tx.oncomplete = resolve;
        tx.onerror = (event) => reject(event.target.error);
      });
    };

    const loadSession = async () => {
      if (!db) await openDB();
      return new Promise((resolve, reject) => {
        const tx = db.transaction('sessions', 'readonly');
        const store = tx.objectStore('sessions');
        const request = store.get('current');
        request.onsuccess = () => resolve(request.result);
        request.onerror = (event) => reject(event.target.error);
      });
    };

    // تحميل الجلسة عند البدء
    document.addEventListener('DOMContentLoaded', async () => {
      try {
        const session = await loadSession();
        if (session) {
          document.getElementById('channelId').value = session.channelId || '';
          document.getElementById('token').value = session.token || '';
          document.getElementById('message').value = session.message || '';
          document.getElementById('delay').value = session.delay || 5;
          
          if (session.isActive) {
            startSending();
          }
        }
      } catch (error) {
        addLog('Error loading session: ' + error.message, 'error');
      }
    });

    // بدء الإرسال
    async function startSending() {
      const channelId = document.getElementById('channelId').value.trim();
      const token = document.getElementById('token').value.trim();
      const message = document.getElementById('message').value.trim();
      const delay = document.getElementById('delay').value;

      if (!channelId || !token || !message) {
        addLog('Please fill all fields', 'error');
        return;
      }

      isSending = true;
      statusText.textContent = 'ACTIVE';
      statusText.className = 'status-text active';
      startBtn.disabled = true;
      stopBtn.disabled = false;
      document.getElementById('status').style.borderLeftColor = 'var(--success-color)';

      // حفظ الجلسة
      await saveSession({
        channelId,
        token,
        message,
        delay,
        isActive: true
      });

      // بدء Worker
      worker.postMessage({
        type: 'START',
        data: { channelId, token, message, delay }
      });

      addLog('Started sending messages', 'success');
    }

    // إيقاف الإرسال
    function stopSending() {
      isSending = false;
      statusText.textContent = 'INACTIVE';
      statusText.className = 'status-text inactive';
      startBtn.disabled = false;
      stopBtn.disabled = true;
      document.getElementById('status').style.borderLeftColor = 'var(--danger-color)';

      // إيقاف Worker
      worker.postMessage({ type: 'STOP' });

      // تحديث الجلسة
      saveSession({
        isActive: false
      });

      addLog('Stopped sending messages', 'warning');
    }

    // إضافة سجل
    function addLog(message, type = 'info', data = null) {
      const logEntry = document.createElement('div');
      logEntry.className = 'log-entry';
      
      const time = new Date().toLocaleTimeString();
      logEntry.innerHTML = \`
        <div class="log-time">[\${time}]</div>
        <div class="log-message \${type}-log">\${message}</div>
      \`;
      
      if (data) {
        const details = document.createElement('div');
        details.className = 'log-details';
        details.textContent = typeof data === 'string' ? data : JSON.stringify(data, null, 2);
        logEntry.appendChild(details);
      }
      
      logsDiv.prepend(logEntry);
      
      // الحفاظ على عدد معقول من السجلات
      if (logsDiv.children.length > 50) {
        logsDiv.removeChild(logsDiv.lastChild);
      }
    }

    // استقبال رسائل من Worker
    worker.onmessage = function(e) {
      const { type, data } = e.data;
      
      if (type === 'LOG') {
        addLog(data.message, data.status, data.error || data.response);
      }
      
      if (type === 'STOPPED') {
        stopSending();
      }
    };

    // أحداث الأزرار
    startBtn.addEventListener('click', startSending);
    stopBtn.addEventListener('click', stopSending);

    // Service Worker التسجيل
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js')
          .then(registration => {
            console.log('ServiceWorker registration successful');
          })
          .catch(err => {
            console.log('ServiceWorker registration failed: ', err);
          });
      });
    }
  </script>
</body>
</html>
